<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تسجيل حساب جديد - Tech Time</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css"/>
  <style>
    body { font-family: 'Cairo', sans-serif; background:#222831; color:#EEEEEE; }
    .glass { background: rgba(255,255,255,0.05); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
    input { background: rgba(255,255,255,0.1); color:white; border-radius: 0.5rem; padding: 0.75rem; width: 100%; }
    input:focus { outline: 2px solid #00ADB5; }
    .btn { @apply w-full py-3 rounded-lg font-bold transition; }
    .btn-green { background:#00ADB5; color:white; }
    .btn-green:hover { background:#00939a; }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center">

<div class="glass p-8 rounded-xl shadow-lg w-full max-w-md text-center" data-aos="zoom-in">
  <h1 class="text-3xl font-bold mb-6 text-[#00ADB5]">تسجيل حساب جديد</h1>
  <div class="space-y-4">
    <input type="text" id="fullName" placeholder="الاسم الكامل" required>
    <input type="email" id="email" placeholder="البريد الإلكتروني" required>
    <input type="password" id="password" placeholder="كلمة المرور" required>
    <input type="password" id="confirmPassword" placeholder="تأكيد كلمة المرور" required>
    <button id="registerBtn" class="btn btn-green">تسجيل حساب</button>
    <p class="text-gray-400 text-sm mt-2">لديك حساب بالفعل؟ <a href="login.html" class="text-[#00ADB5] font-bold">تسجيل الدخول</a></p>
  </div>
</div>

<div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAPRUZs1HHbucnnOdqOr280TjLH86qETnA",
    authDomain: "techtimev3.firebaseapp.com",
    projectId: "techtimev3",
    storageBucket: "techtimev3.appspot.com",
    messagingSenderId: "435597436729",
    appId: "1:435597436729:web:2bd440942a6c0da8fb6ae8",
    measurementId: "G-3984PMGWGH"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const toastContainer = document.getElementById("toastContainer");
  function showToast(message, type = 'success') {
    const toast = document.createElement('div');
    toast.className = `glass px-4 py-3 rounded-lg shadow-md cursor-pointer transition transform hover:scale-105 ${
      type === 'success' ? 'border-green-500 text-green-400' : 'border-red-500 text-red-400'
    }`;
    toast.textContent = message;
    toast.addEventListener('click', () => toast.remove());
    toastContainer.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
  }

  document.getElementById("registerBtn").addEventListener("click", async ()=>{
    const fullName = document.getElementById("fullName").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;

    if(!fullName || !email || !password || !confirmPassword){
      showToast("❌ يرجى ملء جميع الحقول","error");
      return;
    }

    if(password !== confirmPassword){
      showToast("❌ كلمتا المرور غير متطابقتين","error");
      return;
    }

    try{
      const userCredential = await createUserWithEmailAndPassword(auth,email,password);
      await updateProfile(userCredential.user,{displayName:fullName});
      showToast("✅ تم إنشاء الحساب بنجاح!");
      setTimeout(()=>window.location.href="login.html",2000);
    }catch(error){
      showToast("❌ " + error.message,"error");
    }
  });

  AOS.init({ duration: 700, once: true });
</script>

</body>
</html>